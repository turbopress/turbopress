---
import type { Page } from '@turbopress/api/types';
import NoHomePage from '../components/NoHomePage.astro';
import RenderPage from '../components/RenderPage.astro';
import MainLayout from "../layouts/MainLayout.astro";

const homePage = await fetch(`${process.env.PAYLOAD_PUBLIC_SERVER_URL}/api/pages?where[slug][equals]=home`).then(res => res.json())
    .then(res => res?.docs?.[0] as Page | undefined)

const pageTitle = homePage?.title ?? 'TurboPress'
---

<MainLayout title={pageTitle} description="">
  {homePage && <RenderPage page={homePage}/>}
  {!homePage && <NoHomePage/>}
</MainLayout>
